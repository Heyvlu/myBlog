export const info = {time:"2022-11-16",tags:["闭包","自由变量"]};

# 闭包和闭包的使用场景

## 一.什么是闭包

概念：闭包是作用域的一种特殊应用

## 二.自由变量

**不在自己作用域里的变量，就是自由变量**

a是自由变量：
```
const a=100; //全局变量

function fn(){
    console.log(a); //a是自由变量
}
```

**自由变量的值：在函数定义的地方向上层作用域查找。与函数调用位置无关。**

## 三.触发闭包的情况

### 1.函数当做返回值被返回

![图片](闭包和闭包的使用场景1.png)

a是自由变量，所以打印的结果为1。

### 2.函数当做参数被传递

![图片](闭包和闭包的使用场景2.png)

**a是自由变量，所以要在函数定义的地方向上层作用域查找值，而不是在函数调用的位置向上层作用域查找。所以打印a的值为500。**

### 3.自执行匿名函数

![图片](闭包和闭包的使用场景3.png)
闭包的作用，在里面单独创建了一个作用域。

## 四.闭包的应用

### 1.隐藏变量

![图片](闭包和闭包的使用场景4.png)
data被隐藏了

### 2.解决for i 的问题

#### 案例：
点击按钮打印按钮对应的数字
![图片](闭包和闭包的使用场景5.png)
结果：无论点击哪个按钮打印的都是5,因为在点击之前，for循环已经执行完毕，i被设为5。

使用闭包来解决：

![图片](闭包和闭包的使用场景6.png)

也可以使用块级作用域来解决：

![图片](闭包和闭包的使用场景7.png)

**两者的作用都是在里面单独的创建了一个作用域**，把对应的i存起来。

